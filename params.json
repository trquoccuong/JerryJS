{"name":"Jerryjs","tagline":"Nodejs Framework","body":"# JerryJS\r\n\r\n### Introduction\r\n\r\n>JerryJS is a mini framework Nodejs. It use Express for manage route and controller, Sequelize for communicate with database , Nunjucks for view template engine. JerryJS follow \"Convention Over Configuration\". We make some rules for reuse module across projects. This framework try to wrap all (model,controller,route,view) in module and you can easily import or export to another system. JerryJS includes some support modules for help developer manage system.\r\n\r\n### Setup JerryJS\r\n\r\nInstall jerryjs\r\n```\r\n$ npm install jerryjs\r\n```\r\nIf you use database you need install some package depend on your database\r\n```    \r\n$ npm install --save pg pg-hstore\r\n$ npm install --save mysql // For both mysql and mariadb dialects\r\n$ npm install --save sqlite3\r\n$ npm install --save tedious // MSSQL\r\n\r\n```\r\n### JerryJS Requirement\r\n\r\nI write JerryJs with many feature of ES6. For run JerryJS you need iojs newest version.\r\n\r\n### Start JerryJS\r\nFor beginner\r\n1. Make a new project folder.\r\n2. Make a file server.js\r\n``` \r\n'use strict';\r\nvar JerryJS = require(\"jerryjs\");\r\nvar app = new JerryJS;\r\napp.config({ force : true , manager : true , demo : true });\r\napp.listen(8118);\r\n```\r\n3. Run a command\r\n```\r\n$ node server.js\r\n```\r\n4. Go to browser with link http://localhost:8118/modules\r\n\r\n5. You can go to config/moduleConfig.json\r\nChange **active** property to true\r\n\r\n6. Restart application and go to http://localhost:8118/\r\n\r\n### JerryJS start option\r\n\r\n| File  | Desciption |\r\n| ------------- | ------------- |\r\n| force | remake file module Manager every run node |\r\n| manager | enable 2 support module |\r\n| demo |  enable demo module|\r\n\r\nFor enable manager you need install 2 npm:\r\n```\r\n$npm install formidable adm-zip\r\n```\r\n### JerryJS function\r\n\r\n| Function  | Desciption |\r\n| ------------- | ------------- |\r\n| config | init JerryJS system |\r\n| before | Add firstly router(for authentication) |\r\n\r\n### Easy to use Jerry generator\r\nFor easy to use JerryJs you should install jerryjs-generator\r\n\r\n```\r\n$ npm install -g jerryjs-generator //maybe need sudo\r\n```\r\n\r\nFor create jerry structure\r\n```\r\n$ jerry scaffold // Make jerry folder\r\n```\r\nFor make a module\r\n\r\n```\r\n$ jerry module <module name>    // render module with frontend and backend\r\n$ jerry module <module name> -f // only render module with frontend\r\n$ jerry module <module name> -b // only render module with backend\r\n```\r\n\r\n### JerryJS project construction\r\n\r\n```\r\n-Your project\r\n----config\r\n-------config.js\r\n-------moduleConfig.json\r\n-------routerTable.json\r\n----modules\r\n----custom_filters\r\n----layout\r\n-------admin\r\n----public\r\n----server.js\r\n```\r\n\r\n| File  | Desciption |\r\n| ------------- | ------------- |\r\n| config | All JerryJS config |\r\n| modules | folder contain all your modules |\r\n| custom_filters | nunjucks custom filter (optional) |\r\n| layout | backend, frontend layout (optional) |\r\n| public | resources(*.css , *.js, *.jpg , v.v) |\r\n| server.js | running JerryJS |\r\n\r\n### JerryJS module construction \r\n\r\n```\r\n-JerryJS module\r\n----admin\r\n--------controllers\r\n------------index.js\r\n--------views\r\n--------route.js\r\n----controllers\r\n--------index.js\r\n----views\r\n----models\r\n----route.js\r\n----module.js\r\n\r\n```\r\n| File  | Desciption |\r\n| ------------- | ------------- |\r\n| module.js | File declare  JerryJS module |\r\n| admin | Folder backend |\r\n| admin/controllers/index.js | declare backend controllers |\r\n| admin/views | partial views backend folder |\r\n| admin/route.js | backend router file |\r\n| controllers/index.js | declare frontend controllers |\r\n| views | partial views frontend folder |\r\n| models | file models sequelize of this module |\r\n| route.js | frontend router file |\r\n\r\nOne module is not really have all this file. Module only need module.js file. **Warning** controllers must be declare in index file before use in router.\r\n\r\n### Make a module\r\n\r\n```\r\n'use strict';\r\nclass Index extends JerryModule {\r\n    constructor(){\r\n        super();\r\n        this.configurations  = {\r\n            name:'index'\r\n        };\r\n    }\r\n};\r\n\r\nmodule.exports = Index;\r\n```\r\n\r\nYou must have module.configuration.name . This name is unique in project.\r\n\r\n### Make a controller\r\nController must be declared in file **controllers/index.js**\r\n\r\n```\r\nclass Controllers extends JerryController {\r\n        constructor(myModule) {\r\n                super(myModule);\r\n                this.index = function (req, res) {\r\n                        res.send('Hello World');\r\n                };\r\n        }\r\n}\r\n\r\nmodule.exports = Controllers;\r\n\r\n```\r\n\r\nYou should declare controller inside **constructor** for use myModule.\r\nmyModule contain all information of your module.\r\n\r\n| Property  | Desciption |\r\n| ------------- | ------------- |\r\n| myModule.models | Object module models. You can call own models or associated |\r\n| myModule.configurations | all info you set in module.js |\r\n\r\n*Note* :You can rename myModule\r\n\r\n### Render view\r\n\r\nJerryJS has 2 methods to render view. They get template view from  folder **views** inside each module, Some view you want to reuse put them in **layout** folder\r\n```\r\nmyModule.render(view, option)\r\nmyModule.adminRender(view,option)\r\n```\r\nThey return a promise with result is rendered html\r\n*Example:*\r\n```\r\nmyModule.render(\"index.html\", {data : queryResults})\r\n.then(function(html){ res.send (html)})\r\n.catch(function(err){console.log(err)});\r\n```\r\n\r\n### Make a model\r\n\r\nJerryJS use Sequelize for connect database. Put all models file in **models** folder. Sometime you want to call models of other module.You need make an associate models. **Warning** :You only use actived module models\r\n```\r\n\"use strict\";\r\n\r\nmodule.exports = function (sequelize, DataTypes) {\r\n    let User = sequelize.define(\"user\", {\r\n        id : {type : DataTypes.INTEGER ,\r\n            primaryKey : true,\r\n        autoIncrement :true} ,\r\n        name: DataTypes.STRING(60)\r\n    }, {\r\n        timestamps: false,\r\n        freezeTableName: true\r\n    });\r\n    User.sync();\r\n    return User;\r\n};\r\n```\r\nFor associate models add code like below  under the freezeTableName property\r\n\r\n```\r\nclassMethod :{\r\n    associate : function () {\r\n        return [\r\n            [User.hasmany, 'book', {foreignKey: 'book_id'}]\r\n        ]\r\n    }\r\n}\r\n```\r\nmodels can has many association. Every association is a array with array[0] is method associate Sequelize, array[2] is model name, array[3] is option. You can find more information\r\n\r\nfor use models to query database :\r\n```\r\nmyModule.models.user.findById(1)\r\n```\r\nYou must code this inside controller. Sequelize support many method for query\r\n\r\n### Make a route\r\nJerryjs have all feature of express router. you must declare router inside constructor . You only call controllers of this module. if controller is declared, program will throw an error\r\n\r\n```\r\n'use strict';\r\n\r\nclass DemoRouter extends JerryRouter {\r\n    constructor(controllers){\r\n        super()\r\n        this.route('/').get(controllers.index);\r\n    }\r\n}\r\n\r\nmodule.exports = DemoRouter;\r\n```\r\n\r\n### Warning when deploy app\r\n\r\nRemove module manager and route manager when deploy app.\r\n\r\n### Router  file\r\n\r\nJerryJS auto load router in actived module.  This file only use for easy to debug your route. There are two categories: front and back. \r\n\r\n| Property  | Desciption |\r\n| ------------- | ------------- |\r\n| method | method of router( POST, GET, DELETE, PUT) |\r\n| path | url you declare |\r\n| regexp | Regex express |\r\n\r\nYou can use router manager module for a visual layout.\r\n\r\n### Module config file\r\n\r\nJerryJS auto create a file moduleConfig.json. This file contain all modules info, you can change this file manually or using module manager layout.\r\n\r\n| Property  | Desciption |\r\n| ------------- | ------------- |\r\n| name | module name |\r\n| path | module folder |\r\n| active | module status (only actived module be loaded) |\r\n| associate | List other modules link with this module.if module associated you call module models of all those modules. |\r\n| order | Order loading module (ascending). Order loading sometime make problems with order router. |\r\n| Duplicate | Only the first active module loaded.Other modules with same name will be added path to this array. Remember module.name is unique in your project |\r\n\r\n\r\n### Default settings Jerry\r\n\r\n```\r\n    app.use(express.static(JerryBase + '/public'));\r\n    app.use(bodyParser.urlencoded({\r\n        extended: false\r\n    }));\r\n    app.use(cookieParser());\r\n    app.use(helmet());\r\n```\r\nFor custom setting\r\n1. Make file **express.js** inside **config** folder\r\n2. Add setting like example\r\n```\r\n'use strict';\r\nlet express = require('express');\r\nlet bodyParser = require('body-parser');\r\nlet cookieParser = require('cookie-parser');\r\nlet helmet = require('helmet');\r\n\r\nmodule.exports = function(app) {\r\napp.use(express.static(JerryBase + '/public'));\r\n    app.use(bodyParser.urlencoded({\r\n        extended: false\r\n    }));\r\n    app.use(cookieParser());\r\n    app.use(helmet());\r\n}\r\n\r\n```\r\n\r\n### Nunjuck filter\r\n\r\nNunjucks support developer make custom filter. To install custom filter to JerryJS, you need create folder name 'custom_filters' and make a filter like this example\r\nDemo filter\r\n```\r\n\"use strict\";\r\n\r\nlet fs = require('fs');\r\nlet config = require(JerryBase + '/config/config');\r\n\r\nmodule.exports = function (env) {\r\n    env.addFilter('get_theme', function (name) {\r\n        let theme_path = JerryBase + '/themes/' + config.themes + \"/\" + name;\r\n        if (!fs.existsSync(theme_path)) {\r\n            return 'default/' + name;\r\n        } else {\r\n            return config.themes + \"/\" + name;\r\n        }\r\n    });\r\n};\r\n\r\n```\r\n\r\n\r\n### Using middleware\r\n\r\nAdd middleware before or after app.config. This middleware auto active. Middleware after app.listen is disable. Read more about middleware at Express site\r\n\r\n```\r\nlet app = new Jerry;\r\n\r\napp.use(function(req,res,next){\r\n    console.log(req.url);\r\n    next()\r\n}\r\napp.config({ manager : true , demo : true });\r\n\r\n\r\napp.listen(8118);\r\n```\r\n\r\n### Sharing module\r\n\r\nMany developer want to recycle module. With JerryJs you can save time to code.Only need zip your module folder and extract this to modules folder you can reuse this module.\r\nYou can use layout 'modules' to extract module or use any software","google":"UA-64598208-1","note":"Don't delete this file! It's used internally to help with page regeneration."}